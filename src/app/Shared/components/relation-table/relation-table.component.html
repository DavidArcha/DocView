<div class="selected-fields-table" *ngIf="selectedFields.length > 0">
    <table>
        <thead>
            <tr>
                <th>Parent</th>
                <th>Field</th>
                <th>Operator</th>
                <th *ngIf="shouldShowValueColumn()">Value</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let selected of selectedFields; let i = index">
                <td class="parent">
                    <!-- Case 1: If parent is empty or null, show dropdown -->
                    <ng-container *ngIf="isParentEmpty(selected); else showParentLabel">
                        <div class="parent-dropdown">
                            <app-table-dropdown [data]="systemTypeData" [isTableView]="false"
                                [selectedValues]="getParentSelectedValues(selected, i)"
                                [selectedLanguage]="selectedLanguage" [multiSelect]="true"
                                (selectedValuesChange)="onParentValueChange($event, i)">
                            </app-table-dropdown>
                        </div>
                    </ng-container>

                    <!-- Case 2: If parent has data, show label -->
                    <ng-template #showParentLabel>
                        {{ selected.parent.label }}
                    </ng-template>
                </td>
                <td class="field">{{ selected.field.label }}</td>
                <!-- Operator column -->
                <td class="operator">

                </td>
                <!-- Value column: dynamic control rendering -->
                <td class="value">

                </td>
                <td>
                    <button (click)="onSearchSelectedField(selected)">Search</button>
                    <button (click)="onDeleteSelectedField(i)">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>