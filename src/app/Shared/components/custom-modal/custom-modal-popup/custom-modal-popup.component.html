<div class="modal-backdrop" [class.bg-interactive]="config.allowBackgroundInteraction"
    [ngStyle]="{ zIndex: zIndex - 1 }" (click)="onBackdropClick($event)">
</div>

<div class="custom-modal" [ngStyle]="{
       width: config.width,
       height: config.height,
       top: top + 'px',
       left: left + 'px',
       position: 'fixed',
       zIndex: zIndex,
       borderRadius: '6px'
     }" [attr.role]="'dialog'" aria-modal="true" tabindex="-1">

    <div class="custom-modal-header" [ngStyle]="{ background: config.headerColor || '#2c3e50' }">
        <span class="modal-title">{{ config.title }}</span>
        <div class="header-actions">
            <button *ngIf="config.draggable" class="drag-handle" (mousedown)="onDragStart($event)"
                aria-label="Drag">&#x2630;</button>
            <button (click)="minimize()" aria-label="Minimize">_</button>
            <button (click)="close()" aria-label="Close">&times;</button>
        </div>
    </div>

    <div class="custom-modal-body" *ngIf="!isMinimized">
        <ng-container *ngIf="config.template" [ngTemplateOutlet]="config.template"
            [ngTemplateOutletContext]="{ data: config.data, modalRef: modalRef }">
        </ng-container>
        <ng-container *ngIf="config.component && !config.template" #dynamicContent></ng-container>
    </div>

    <div class="custom-modal-footer" *ngIf="config.showFooter !== false && !isMinimized">
        <ng-content select="[footer]"></ng-content>
    </div>
</div>